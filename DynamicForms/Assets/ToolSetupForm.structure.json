{
  "id": "ToolSetupForm",
  "label": "Tool Setup",
  "elementType": "Form",
  "schemaVersion": "1.0",
  "children": [
    {
      "id": "EntryRowSection",
      "label": "Tool Setup Entry",
      "elementType": "Section",
      "layout": {
        "panelType": "Grid",
        "rowDefinitions": [
          { "height": "Auto" }
        ],
        "columnDefinitions": [
          { "width": "120" },
          { "width": "250" },
          { "width": "220" },
          { "width": "100" }
        ]
      },
      "children": [
        {
          "id": "ToolSetupNumber",
          "label": "Tool Setup #",
          "elementType": "Field",
          "bindingPath": "data.currentEntry.toolSetupNumber",
          "dataType": "Int",
          "controlType": "TextDisplay",
          "isVisible": true,
          "isEnabled": false,
          "defaultValue": 1,
          "autoIncrement": true,
          "layout": {
            "gridRow": 0,
            "gridColumn": 0
          }
        },
        {
          "id": "ToolingSetupPer",
          "label": "Tooling Setup Per",
          "elementType": "Field",
          "bindingPath": "data.currentEntry.toolingSetupPer",
          "dataType": "String",
          "controlType": "Dropdown",
          "isVisible": true,
          "isEnabled": true,
          "layout": {
            "gridRow": 0,
            "gridColumn": 1
          },
          "options": [
            "Machine 1",
            "Machine 2",
            "Machine 3",
            "Machine 4",
            "Machine 5"
          ],
          "validation": {
            "isRequired": true,
            "errorMessage": "Please select a tooling setup per value."
          }
        },
        {
          "id": "ToolingSetUsed",
          "label": "Tooling Set Used",
          "elementType": "Field",
          "bindingPath": "data.currentEntry.toolingSetUsed",
          "dataType": "String",
          "controlType": "DialogInput",
          "isVisible": true,
          "isEnabled": true,
          "layout": {
            "gridRow": 0,
            "gridColumn": 2
          },
          "validation": {
            "isRequired": true,
            "maxLength": 100,
            "errorMessage": "Tooling set used is required."
          }
        },
        {
          "id": "SaveNewSetup",
          "label": "Save",
          "elementType": "Action",
          "controlType": "Button",
          "actionType": "SaveNewEntry",
          "isVisible": true,
          "isEnabled": false,
          "layout": {
            "gridRow": 0,
            "gridColumn": 3
          },
          "dependencies": [
            {
              "type": "EnableWhen",
              "sourcePath": "data.currentEntry.toolingSetupPer",
              "operator": "NotEmpty"
            },
            {
              "type": "EnableWhen",
              "sourcePath": "data.currentEntry.toolingSetUsed",
              "operator": "NotEmpty"
            }
          ],
          "saveConfig": {
            "sourceObjectPath": "data.currentEntry",
            "targetCollectionPath": "data.logs",
            "autoIncrementField": "toolSetupNumber",
            "counterPath": "meta.toolSetupCounter",
            "resetAfterSave": true
          }
        }
      ]
    },
    {
      "id": "LogSection",
      "label": "Tool Setup Log",
      "elementType": "Repeater",
      "bindingPath": "data.logs",
      "layout": {
        "panelType": "Grid",
        "rowDefinitions": [
          { "height": "Auto" },
          { "height": "Auto" },
          { "height": "Auto" }
        ]
      },
      "minItems": 0,
      "maxItems": 1000,
      "dependencies": [
        {
          "type": "VisibleWhen",
          "sourcePath": "data.logs",
          "operator": "HasAny"
        }
      ],
      "itemTemplate": [
        {
          "id": "SummarySection",
          "label": "Tool Setup Summary",
          "elementType": "Section",
          "layout": {
            "gridRow": 0,
            "panelType": "Grid",
            "rowDefinitions": [
              { "height": "Auto" }
            ],
            "columnDefinitions": [
              { "width": "120" },
              { "width": "250" },
              { "width": "220" },
              { "width": "100" }
            ]
          },
          "children": [
            {
              "id": "Log_ToolSetupNumber",
              "label": "Tool Setup #",
              "elementType": "Field",
              "bindingPath": "toolSetupNumber",
              "dataType": "Int",
              "controlType": "TextDisplay",
              "layout": {
                "gridRow": 0,
                "gridColumn": 0
              }
            },
            {
              "id": "Log_ToolingSetupPer_Display",
              "label": "Tooling Setup Per",
              "elementType": "Field",
              "bindingPath": "toolingSetupPer",
              "dataType": "String",
              "controlType": "TextDisplay",
              "layout": {
                "gridRow": 0,
                "gridColumn": 1
              },
              "dependencies": [
                {
                  "type": "VisibleWhen",
                  "sourcePath": "isEditing",
                  "operator": "Equals",
                  "value": false
                }
              ]
            },
            {
              "id": "Log_ToolingSetupPer_Edit",
              "label": "Tooling Setup Per",
              "elementType": "Field",
              "bindingPath": "toolingSetupPer",
              "dataType": "String",
              "controlType": "Dropdown",
              "options": [
                "Machine 1",
                "Machine 2",
                "Machine 3",
                "Machine 4",
                "Machine 5"
              ],
              "layout": {
                "gridRow": 0,
                "gridColumn": 1
              },
              "dependencies": [
                {
                  "type": "VisibleWhen",
                  "sourcePath": "isEditing",
                  "operator": "Equals",
                  "value": true
                }
              ]
            },
            {
              "id": "Log_ToolingSetUsed_Display",
              "label": "Tooling Set Used",
              "elementType": "Field",
              "bindingPath": "toolingSetUsed",
              "dataType": "String",
              "controlType": "TextDisplay",
              "layout": {
                "gridRow": 0,
                "gridColumn": 2
              },
              "dependencies": [
                {
                  "type": "VisibleWhen",
                  "sourcePath": "isEditing",
                  "operator": "Equals",
                  "value": false
                }
              ]
            },
            {
              "id": "Log_ToolingSetUsed_Edit",
              "label": "Tooling Set Used",
              "elementType": "Field",
              "bindingPath": "toolingSetUsed",
              "dataType": "String",
              "controlType": "DialogInput",
              "layout": {
                "gridRow": 0,
                "gridColumn": 2
              },
              "dependencies": [
                {
                  "type": "VisibleWhen",
                  "sourcePath": "isEditing",
                  "operator": "Equals",
                  "value": true
                }
              ]
            },
            {
              "id": "Log_EditButton",
              "label": "Edit",
              "elementType": "Action",
              "controlType": "Button",
              "actionType": "EnterEditMode",
              "layout": {
                "gridRow": 0,
                "gridColumn": 3
              },
              "dependencies": [
                {
                  "type": "VisibleWhen",
                  "sourcePath": "isEditing",
                  "operator": "Equals",
                  "value": false
                }
              ]
            },
            {
              "id": "Log_SaveButton",
              "label": "Save",
              "elementType": "Action",
              "controlType": "Button",
              "actionType": "SaveRowEdit",
              "layout": {
                "gridRow": 0,
                "gridColumn": 3
              },
              "dependencies": [
                {
                  "type": "VisibleWhen",
                  "sourcePath": "isEditing",
                  "operator": "Equals",
                  "value": true
                }
              ]
            }
          ]
        },
        {
          "id": "SetupInformationSection",
          "label": "",
          "elementType": "Section",
          "layout": {
            "gridRow": 1,
            "panelType": "Grid",
            "rowDefinitions": [
              { "height": "50" },
              { "height": "50" }
            ]
          },
          "children": [
            {
              "id": "SetupInfo_HeaderRow",
              "label": "",
              "elementType": "Section",
              "layout": {
                "gridRow": 0,
                "panelType": "Grid",
                "rowDefinitions": [
                  { "height": "50" }
                ],
                "columnDefinitions": [
                  { "width": "*" },
                  { "width": "Auto" },
                  { "width": "Auto" }
                ]
              },
              "children": [
                {
                  "id": "SetupInfo_Title",
                  "label": "Setup Information",
                  "elementType": "Field",
                  "dataType": "String",
                  "controlType": "TextDisplay",
                  "isVisible": true,
                  "isEnabled": false,
                  "layout": {
                    "gridRow": 0,
                    "gridColumn": 0
                  }
                },
                {
                  "id": "SetupInfo_Sign",
                  "label": "Sign",
                  "elementType": "Action",
                  "controlType": "Button",
                  "actionType": "SetupInfoSign",
                  "layout": {
                    "gridRow": 0,
                    "gridColumn": 1
                  }
                },
                {
                  "id": "SetupInfo_Cancel",
                  "label": "Cancel",
                  "elementType": "Action",
                  "controlType": "Button",
                  "actionType": "SetupInfoCancel",
                  "layout": {
                    "gridRow": 0,
                    "gridColumn": 2
                  }
                }
              ]
            },
            {
              "id": "SetupInfo_BodyPlaceholder",
              "label": "(Setup information details will go here)",
              "elementType": "Field",
              "dataType": "String",
              "controlType": "TextDisplay",
              "layout": {
                "gridRow": 1
              },
              "isVisible": true,
              "isEnabled": false
            }
          ]
        },
        {
          "id": "RecipeVerificationSection",
          "label": "",
          "elementType": "Section",
          "layout": {
            "gridRow": 2,
            "panelType": "Grid",
            "rowDefinitions": [
              { "height": "50" },
              { "height": "50" }
            ]
          },
          "children": [
            {
              "id": "Recipe_HeaderRow",
              "label": "",
              "elementType": "Section",
              "layout": {
                "gridRow": 0,
                "panelType": "Grid",
                "rowDefinitions": [
                  { "height": "50" }
                ],
                "columnDefinitions": [
                  { "width": "*" },
                  { "width": "Auto" },
                  { "width": "Auto" }
                ]
              },
              "children": [
                {
                  "id": "Recipe_Title",
                  "label": "Recipe Verification",
                  "elementType": "Field",
                  "dataType": "String",
                  "controlType": "TextDisplay",
                  "isVisible": true,
                  "isEnabled": false,
                  "layout": {
                    "gridRow": 0,
                    "gridColumn": 0
                  }
                },
                {
                  "id": "Recipe_Verify",
                  "label": "Verify",
                  "elementType": "Action",
                  "controlType": "Button",
                  "actionType": "RecipeVerify",
                  "layout": {
                    "gridRow": 0,
                    "gridColumn": 1
                  }
                },
                {
                  "id": "Recipe_Cancel",
                  "label": "Cancel",
                  "elementType": "Action",
                  "controlType": "Button",
                  "actionType": "RecipeCancel",
                  "layout": {
                    "gridRow": 0,
                    "gridColumn": 2
                  }
                }
              ]
            },
            {
              "id": "Recipe_BodyPlaceholder",
              "label": "(Recipe verification details will go here)",
              "elementType": "Field",
              "dataType": "String",
              "controlType": "TextDisplay",
              "layout": {
                "gridRow": 1
              },
              "isVisible": true,
              "isEnabled": false
            }
          ]
        }
      ]
    }
  ]
}